<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 1</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="style.css"/>
  </head>
  <body>
    <h1>Interactive US Map</h1>
    <h2>Team: Alexander Huot, Khoi Doan, Andrew Petit</h2>
    <div id="country">
        <div id="city">
            <svg width="960" height="500"> <!--this stuff right here is not really needed, since we just get rid of it anyway after appending new dots-->
                <circle cx="894.5904298167112" cy="105.48290513422194" r="10"></circle>
                <circle id="chicago" cx="618.6180697107831" cy="164.5951930014994" r="10"></circle>
                <circle id="dallas" cx="460.3202984929121" cy="383.1403249363311" r="10"></circle>
                <circle id="newYork" cx="854.5708175202567" cy="154.02359484534668" r="10"></circle>
                <circle id="la" cx="56.60659487711308" cy="304.2365506359156" r="10"></circle>
                <circle id="houston" cx="488.3685957613856" cy="453.15863250624943" r="10"></circle>
                <circle id="min" cx="520.3973525968821" cy="98.23279437830399" r="10"></circle>
                <circle id="denver" cx="317.56354129724684" cy="213.28621034875107" r="10"></circle>
                <circle id="dc" cx="811.4657161514506" cy="206.59056765014157" r="10"></circle>
                <circle id="atlanta" cx="696.8407306951635" cy="347.0457561301166" r="10"></circle>
                <circle id="az" cx="169.16160725691094" cy="341.585707740727" r="10"></circle>
                <circle id="philly" cx="838.7890402686346" cy="175.8370480134363" r="10"></circle>
            </svg>
        </div>
    </div>
    <div id = "displayInfo" hidden></div>
  </body>
            <script src="https://d3js.org/d3.v3.min.js"></script> <!--d3-->
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script> <!--jquery-->
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> <!--bootstrap-->
            <script src="bosny.js"></script> <!--all json files we need - contain our lat-long coordinates for routes -->
            <script src="nypa.js"></script>
            <script src="nydc.js"></script>
            <script src="bschi.js"></script>
            <script src="nychi.js"></script>
            <script src="dcchi.js"></script>
            <script src="pachi.js"></script>
            <script src="chiat.js"></script>
            <script src="wasat.js"></script>
            <script src="athou.js"></script>
            <script src="atdal.js"></script>
            <script src="dalho.js"></script>
            <script src="chiho.js"></script>
            <script src="chida.js"></script>
            <script src="minda.js"></script>
            <script src="chimn.js"></script>
            <script src="chidn.js"></script>
            <script src="daldn.js"></script>
            <script src="mindn.js"></script>
            <script src="denaz.js"></script>
            <script src="dalaz.js"></script>
            <script src="houaz.js"></script>
            <script src="laaz.js"></script>
            <script src="denla.js"></script>
            <script src="wasDn.js"></script>
            <script src="wasda.js"></script>
            <script src="wasaz.js"></script>
            <script src="wasla.js"></script>
            <script src="chiaz.js"></script>
            <script>
                //contains all the routes to and from cities
                var multipointLine = {
                    "type" : "MultiLineString",
                    "coordinates" : []
                }
                var pressedCities = []; //keeps track of the cities that were pressed
                var cityNames = []; //to display city names to user
                var estimatedTime; //to display the expected time it will take to travel by car
                var miles; //to display the number of miles in between a route for the user
                var file; //this could prove useful to have if we want to add additional information

                var svg = d3.select("svg");
                //the below array contains all the xy coordinates for each of the cities 
                var array = [[894.5904298167112,105.48290513422194],[618.6180697107831,164.5951930014994],[460.3202984929121,383.1403249363311],[854.5708175202567,154.02359484534668], [56.60659487711308,304.2365506359156],[488.3685957613856,453.15863250624943],[520.3973525968821,98.23279437830399],[317.56354129724684,213.28621034875107],[811.4657161514506,206.59056765014157],[696.8407306951635,347.0457561301166],[169.16160725691094,341.585707740727],[838.7890402686346,175.8370480134363 ]];
                var length = array.length;
                console.log(length);
                
                //add events to each of the cities  
                var boston = svg.selectAll("circle")
                .data([[array[0][0], array[0][1], "boston"]], function(d) { return d; })
                var chicago = svg.selectAll("circle")
                .data([[array[1][0], array[1][1]]], function(d) {
                    return d; }) 
                var dallas = svg.selectAll("circle")
                .data([[array[2][0], array[2][1]]], function(d){
                    return d;})
                var newYork = svg.selectAll("circle")
                .data([[array[3][0], array[3][1]]], function(d){
                    return d;})
                var la = svg.selectAll("circle")
                .data([[array[4][0], array[4][1]]], function(d){
                    return d;})
                var houston = svg.selectAll("circle")
                .data([[array[5][0], array[5][1]]], function(d){
                    return d;})
                var min = svg.selectAll("circle")
                .data([[array[6][0], array[6][1]]], function(d){
                    return d;})
                var denver = svg.selectAll("circle")
                .data([[array[7][0], array[7][1]]], function(d){
                    return d;})
                var dc = svg.selectAll("circle")
                .data([[array[8][0], array[8][1]]], function(d){
                    return d;})
                var atlanta = svg.selectAll("circle")
                .data([[array[9][0], array[9][1]]], function(d){
                    return d;})
                var az = svg.selectAll("circle")
                .data([[array[10][0], array[10][1]]], function(d){
                    return d;})
                var philly = svg.selectAll("circle")
                .data([[array[11][0], array[11][1]]], function(d){
                    return d;})
                var cities = [boston, chicago, dallas, newYork, la, houston, min, denver, dc, atlanta, az, philly];
                //we are going to be changing the cities to appear blue and smaller
                for (var j = 0; j < cities.length; j++){
                    cities[j].enter().append("circle")
                    .attr("cy", function(d) { return d[1]; })
                    .attr("cx", function(d) { return d[0]; })
                    .attr("r", 5)
                    .attr("fill", "blue")
                    .on("click", clicked);

                    cities[j].exit().remove();
                }

                var bool = false; //two cities have not yet been selected
                var objects = []; //keep track of the selected cities by the user so that we can reset these to blue when more than 2 are selected
                function clicked(d) {
                    if (bool){
                        var div = document.getElementById("displayInfo");
                        div.innerHTML = ""; //clear the content in the div - not necessarily needed
                        div.hidden = true; // hide the div that shows information
                        d3.select("path").remove();
                        for (var k = 0; k < objects.length; k++){
                            var e = d3.select(objects[k]);
                            e.attr("fill", "blue"); //reset each of the cities that were pressed to blue
                        }
                    
                        bool = false; //since everything has been cleared - reset the bool value
                        console.log(multipointLine.coordinates);
                        multipointLine.coordinates = []; //this isn't really needed, but clear out the info in the route
                        pressedCities = []; //this is needed - clear out the cities that were pressed
                        objects = [];
                    }
                    objects.push(this); //put this object into the list since we can't assign ids 
                    var c = d3.select(this);
                    console.log(this.cx.animVal.value); //get the coordinate of the selected circle
                    var value = this.cx.animVal.value;
                    addCityToList(value); //have the system figure out which city was selected
                    if(pressedCities.length == 2){ //only if there are two cities selected should we display a route
                        pressedTwoCities(); //display a route
                    }
                    c.attr("fill", "yellow"); //show that the city was selected 
                }

                function addCityToList(value){
                    //switch statement to find which city was selected
                    switch (value){
                        case 894.5904541015625:
                            pressedCities.push("boston");
                            break;
                        case 618.6180419921875:
                            pressedCities.push("chicago");
                            break;
                        case 460.3203125:
                            pressedCities.push("dallas");
                            break;
                        case 854.57080078125:
                            pressedCities.push("newyork");
                            break;
                        case 56.60659408569336:
                            pressedCities.push("losangeles");
                            break;
                        case 488.36859130859375:
                            pressedCities.push("Houston");
                            break;
                        case 520.3973388671875:
                            pressedCities.push("Minneapolis");
                            break;
                        case 317.56353759765625:
                            pressedCities.push("denver");
                            break;
                        case 811.4656982421875:
                            pressedCities.push("dc");
                            break;
                        case 696.8407592773438:
                            pressedCities.push("atlanta");
                            break;
                        case 169.16160583496094:
                            pressedCities.push("phoenix");
                            break;
                        case 838.7890625:
                            pressedCities.push("philly");
                            break;
                        default:
                            console.log("problem"); //if we got here, something is seriously wrong
                        }
                }

                function pressedTwoCities(){
                	var req = new XMLHttpRequest();
                	req.addEventListener("load", function() {
                		console.log(req.response);
                        var request = JSON.parse(req.response);
                        var steps = request.routes[0].legs[0].steps; //coordinates
                        makeLine(steps); //convert coordinates to a line
                        cityNames[0] = request.routes[0].legs[0].start_address;
                        cityNames[1] = request.routes[0].legs[0].end_address;
                        miles = request.routes[0].legs[0].distance.text;
                        estimatedTime = request.routes[0].legs[0].duration.text;
                		bool = true;
                	}) 
                	req.open("GET", "/route?beg="+pressedCities[0]+"&end="+pressedCities[1]);
                    req.send();
                }
                
                //worst comes to worst - we have manually data that we can rely on
                /*
                function pressedTwoCities(){
                    //the next if statements get the route and information about the route
                    if (pressedCities.includes("boston") && pressedCities.includes("newyork")){
                        multipointLine.coordinates.push(bostonNewYork);
                        cityNames = bosny.cityNames;
                        routeTime[0] = bosny.estimatedTime[0];
                        routeTime[1] = bosny.estimatedTime[1];
                        miles = bosny.miles;
                        //file = bosny;
                    } 
                    if (pressedCities.includes("chicago") && pressedCities.includes("newyork")){
                        multipointLine.coordinates.push(newChi);
                        cityNames = nychi.cityNames;
                        routeTime[0] = nychi.estimatedTime[0];
                        routeTime[1] = nychi.estimatedTime[1];
                        miles = nychi.miles;
                        //file = nychi;
                    }
                    if (pressedCities.includes("chicago") &&
                        pressedCities.includes("boston")){
                        multipointLine.coordinates.push(bosChi);
                        cityNames = bschi.cityNames;
                        routeTime[0] = bschi.estimatedTime[0];
                        routeTime[1] = bschi.estimatedTime[1];
                        miles = bschi.miles;
                        //file = bschi;
                    }
                    if (pressedCities.includes("boston") && pressedCities.includes("dc")){
                        multipointLine.coordinates.push(bostonNewYork);
                        multipointLine.coordinates.push(newDc);
                        cityNames = ["Boston", "Washington D.C"];
                        routeTime[0] = bosny.estimatedTime[0] + nydc.estimatedTime[0];
                        routeTime[1] = bosny.estimatedTime[1] + nydc.estimatedTime[1];
                        miles = bosny.miles + nydc.miles;
                    }
                    if (pressedCities.includes("newyork") && pressedCities.includes("philly")){
                        multipointLine.coordinates.push(newPa);
                        cityNames = nypa.cityNames;
                        routeTime[0] = nypa.estimatedTime[0];
                        routeTime[1] = nypa.estimatedTime[1];
                        miles = nypa.miles;
                        //file = nypa;
                    }
                    if (pressedCities.includes("newyork") &&
                        pressedCities.includes("dc")){
                        multipointLine.coordinates.push(newDc);
                        cityNames = nydc.cityNames;
                        routeTime[0] = nydc.estimatedTime[0];
                        routeTime[1] = nydc.estimatedTime[1];
                        miles = nydc.miles;
                        //file = nydc;
                    }
                    if (pressedCities.includes("philly") && pressedCities.includes("chicago")){
                        multipointLine.coordinates.push(paChi);
                        cityNames = pachi.cityNames;
                        routeTime[0] = pachi.estimatedTime[0];
                        routeTime[1] = pachi.estimatedTime[1];
                        miles = pachi.miles;
                        //file = pachi;
                    }
                    if (pressedCities.includes("dc") && pressedCities.includes("chicago")){
                        multipointLine.coordinates.push(dcChi);
                        cityNames = dcchi.cityNames;
                        routeTime[0] = dcchi.estimatedTime[0];
                        routeTime[1] = dcchi.estimatedTime[1];
                        miles = dcchi.miles;
                        //file = dcchi;
                    }
                    if (pressedCities.includes("dc") && pressedCities.includes("atlanta")){
                        multipointLine.coordinates.push(wasAt);
                        cityNames = wasat.cityNames;
                        routeTime[0] = wasat.estimatedTime[0];
                        routeTime[1] = wasat.estimatedTime[1];
                        miles = wasat.miles;
                        //file = wasat;
                    }
                    if (pressedCities.includes("boston") && pressedCities.includes("philly")){
                        multipointLine.coordinates.push(bostonNewYork);
                        multipointLine.coordinates.push(newPa);
                        cityNames = ["Boston", "Philadelphia"];
                        routeTime[0] = bosny.estimatedTime[0] + nypa.estimatedTime[0];
                        routeTime[1] = bosny.estimatedTime[1] + nypa.estimatedTime[1];
                        miles = bosny.miles + nypa.miles;
                    }
                    if (pressedCities.includes("boston") && pressedCities.includes("atlanta")){
                        multipointLine.coordinates.push(bostonNewYork);
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasAt);
                        cityNames = ["Boston", "Atlanta"];
                        routeTime[0] = bosny.estimatedTime[0] + nydc.estimatedTime[0] + wasat.estimatedTime[0];
                        routeTime[1] = bosny.estimatedTime[1] + nydc.estimatedTime[1] + wasat.estimatedTime[1];
                        miles = bosny.miles + nypa.miles + wasat.miles;
                    }
                    if (pressedCities.includes("newyork") && pressedCities.includes("atlanta")){
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasAt);
                        cityNames = ["New York", "Atlanta"];
                        routeTime[0] = nydc.estimatedTime[0] + wasat.estimatedTime[0];
                        routeTime[1] = nydc.estimatedTime[1] + wasat.estimatedTime[1];
                        miles = nypa.miles + wasat.miles;
                    }
                    if (pressedCities.includes("chicago") && pressedCities.includes("min")){
                        multipointLine.coordinates.push(chiMn);
                        cityNames = chimn.cityNames;
                        routeTime[0] = chimn.estimatedTime[0];
                        routeTime[1] = chimn.estimatedTime[1];
                        miles = chimn.miles;
                        //file = chimn;
                    }
                    if (pressedCities.includes("boston") && pressedCities.includes("min")){
                        multipointLine.coordinates.push(bosChi);
                        multipointLine.coordinates.push(chiMn);
                        cityNames = ["Boston", "Minneapolis"];
                        routeTime[0] = bschi.estimatedTime[0] + chimn.estimatedTime[0];
                        routeTime[1] = bschi.estimatedTime[1] + chimn.estimatedTime[1];
                        miles = bschi.miles + chimn.miles;
                    }
                    if (pressedCities.includes("newyork") && pressedCities.includes("min")){
                        multipointLine.coordinates.push(newChi);
                        multipointLine.coordinates.push(chiMn);
                        cityNames = ["New York", "Minneapolis"];
                        routeTime[0] = nychi.estimatedTime[0] + chimn.estimatedTime[0];
                        routeTime[1] = nychi.estimatedTime[1] + chimn.estimatedTime[1];
                        miles = nychi.miles + chimn.miles;
                    }
                    if (pressedCities.includes("dc") && pressedCities.includes("min")){
                        multipointLine.coordinates.push(dcChi);
                        multipointLine.coordinates.push(chiMn);
                        cityNames = ["Washington D.C", "Minneapolis"];
                        routeTime[0] = dcchi.estimatedTime[0] + chimn.estimatedTime[0];
                        routeTime[1] = dcchi.estimatedTime[1] + chimn.estimatedTime[1];
                        miles = dcchi.miles + chimn.miles;
                    }
                    if (pressedCities.includes("philly") && pressedCities.includes("min")){
                        multipointLine.coordinates.push(paChi);
                        multipointLine.coordinates.push(chiMn);
                        cityNames = ["Philadelphia", "Minneapolis"];
                        routeTime[0] = pachi.estimatedTime[0] + chimn.estimatedTime[0];
                        routeTime[1] = pachi.estimatedTime[1] + chimn.estimatedTime[1];
                        miles = pachi.miles + chimn.miles;
                    }
                    if (pressedCities.includes("atlanta") && pressedCities.includes("chicago")){
                        multipointLine.coordinates.push(chiAt);
                        cityNames = chiat.cityNames;
                        routeTime[0] = chiat.estimatedTime[0];
                        routeTime[1] = chiat.estimatedTime[1];
                        miles = chiat.miles;
                        //file = chiat;
                    }
                    if (pressedCities.includes("atlanta") && pressedCities.includes("min")){
                        multipointLine.coordinates.push(chiAt);
                        multipointLine.coordinates.push(chiMn);
                        cityNames = ["Atlanta", "Minneapolis"];
                        routeTime[0] = chiat.estimatedTime[0] + chimn.estimatedTime[0];
                        routeTime[1] = chiat.estimatedTime[1] + chimn.estimatedTime[1];
                        miles = chiat.miles + chimn.miles;
                    }
                    if (pressedCities.includes("atlanta") && pressedCities.includes("dallas")){
                        multipointLine.coordinates.push(atDal);
                        cityNames = atdal.cityNames;
                        routeTime[0] = atdal.estimatedTime[0];
                        routeTime[1] = atdal.estimatedTime[1];
                        miles = atdal.miles;
                        //file = atdal;
                    }
                    if (pressedCities.includes("atlanta") && pressedCities.includes("houston")){
                        multipointLine.coordinates.push(atHou);
                        cityNames = athou.cityNames;
                        routeTime[0] = athou.estimatedTime[0];
                        routeTime[1] = athou.estimatedTime[1];
                        miles = athou.miles;
                        //file = athou;
                    }
                    if (pressedCities.includes("dallas") && pressedCities.includes("houston")){
                        multipointLine.coordinates.push(dalHo);
                        cityNames = dalho.cityNames;
                        routeTime[0] = dalho.estimatedTime[0];
                        routeTime[1] = dalho.estimatedTime[1];
                        miles = dalho.miles;
                        //file = dalho;
                    }
                    if (pressedCities.includes("dallas") && pressedCities.includes("denver")){
                        multipointLine.coordinates.push(dalDn);
                        cityNames = daldn.cityNames;
                        routeTime[0] = daldn.estimatedTime[0];
                        routeTime[1] = daldn.estimatedTime[1];
                        miles = daldn.miles;
                        //file = daldn;
                    }
                    if (pressedCities.includes("houston") && pressedCities.includes("denver")){
                        multipointLine.coordinates.push(dalHo);
                        multipointLine.coordinates.push(dalDn);
                        cityNames = ["Houston", "Denver"];
                        routeTime[0] = dalho.estimatedTime[0] + daldn.estimatedTime[0];
                        routeTime[1] = dalho.estimatedTime[1] + daldn.estimatedTime[1];
                        miles = daldn.miles + dalho.miles;
                    }
                    if (pressedCities.includes("denver") && pressedCities.includes("chicago")){
                        multipointLine.coordinates.push(chiDn);
                        cityNames = chidn.cityNames;
                        routeTime[0] = chidn.estimatedTime[0];
                        routeTime[1] = chidn.estimatedTime[1];
                        miles = chidn.miles;
                        //file = chidn;
                    }
                    if (pressedCities.includes("min") && pressedCities.includes("denver")){
                        multipointLine.coordinates.push(minDn);
                        cityNames = mindn.cityNames;
                        routeTime[0] = mindn.estimatedTime[0];
                        routeTime[1] = mindn.estimatedTime[1];
                        miles = mindn.miles;
                        //file = mindn;
                    }
                    if (pressedCities.includes("dallas") && pressedCities.includes("chicago")){
                        multipointLine.coordinates.push(chiDa);
                        cityNames = chida.cityNames;
                        routeTime[0] = chida.estimatedTime[0];
                        routeTime[1] = chida.estimatedTime[1];
                        miles = chida.miles;
                        //file = chida;
                    }
                    if (pressedCities.includes("houston") && pressedCities.includes("chicago")){
                        multipointLine.coordinates.push(chiHo);
                        cityNames = chiho.cityNames;
                        routeTime[0] = chiho.estimatedTime[0];
                        routeTime[1] = chiho.estimatedTime[1];
                        miles = chiho.miles;
                        //file = chiho;
                    }
                    if (pressedCities.includes("chicago") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(chiDn);
                        multipointLine.coordinates.push(denLa);
                        cityNames = ["Chicago", "Los Angeles"];
                        routeTime[0] = chidn.estimatedTime[0] + denla.estimatedTime[0];
                        routeTime[1] = chidn.estimatedTime[1] + denla.estimatedTime[1];
                        miles = chidn.miles + denla.miles;
                    }
                    if (pressedCities.includes("denver") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(denLa);
                        cityNames = denla.cityNames;
                        routeTime[0] = denla.estimatedTime[0];
                        routeTime[1] = denla.estimatedTime[1];
                        miles = denla.miles;
                        //file = denla;
                    }
                    if (pressedCities.includes("min") && pressedCities.includes("dallas")){
                        multipointLine.coordinates.push(minDa);
                        cityNames = minda.cityNames;
                        routeTime[0] = minda.estimatedTime[0];
                        routeTime[1] = minda.estimatedTime[1];
                        miles = minda.miles;
                        //file = minda;
                    }
                    if (pressedCities.includes("min") && pressedCities.includes("houston")){
                        multipointLine.coordinates.push(dalHo);
                        multipointLine.coordinates.push(minDa);
                        cityNames = ["Minneapolis" , "Houston"];
                        routeTime[0] = dalho.estimatedTime[0] + minda.estimatedTime[0];
                        routeTime[1] = dalho.estimatedTime[1] + minda.estimatedTime[1];
                        miles = minda.miles + dalho.miles;
                    }
                    if (pressedCities.includes("boston") && pressedCities.includes("houston")){
                        multipointLine.coordinates.push(bostonNewYork);
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasAt);
                        multipointLine.coordinates.push(atHou);
                        cityNames = ["Boston", "Houston"];
                        routeTime[0] = bosny.estimatedTime[0] + nydc.estimatedTime[0] + wasat.estimatedTime[0] + athou.estimatedTime[0];
                        routeTime[1] = bosny.estimatedTime[1] + nydc.estimatedTime[1] + wasat.estimatedTime[1] + athou.estimatedTime[1];
                        miles = bosny.miles + nydc.miles + wasat.miles + athou.miles; 
                    }
                    if (pressedCities.includes("newyork") && pressedCities.includes("houston")){
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasAt);
                        multipointLine.coordinates.push(atHou);

                        cityNames = ["New York", "Houston"];
                        routeTime[0] = nydc.estimatedTime[0] + wasat.estimatedTime[0] + athou.estimatedTime[0];
                        routeTime[1] = nydc.estimatedTime[1] + wasat.estimatedTime[1] + athou.estimatedTime[1];
                        miles = nydc.miles + wasat.miles + athou.miles; 
                    }
                    if (pressedCities.includes("dc") && pressedCities.includes("houston")){
                        multipointLine.coordinates.push(wasAt);
                        multipointLine.coordinates.push(atHou);

                        cityNames = ["Washington D.C", "Houston"];
                        routeTime[0] = wasat.estimatedTime[0] + athou.estimatedTime[0];
                        routeTime[1] = wasat.estimatedTime[1] + athou.estimatedTime[1];
                        miles = wasat.miles + athou.miles; 
                    }
                    if (pressedCities.includes("dc") && pressedCities.includes("dallas")){
                        multipointLine.coordinates.push(wasDa);
                        cityNames = wasda.cityNames;
                        routeTime[0] = wasda.estimatedTime[0];
                        routeTime[1] = wasda.estimatedTime[1];
                        miles = wasda.miles;
                        //file = wasda;
                    }
                    if (pressedCities.includes("dc") && pressedCities.includes("denver")){
                        multipointLine.coordinates.push(wasDn);
                        cityNames = wasdn.cityNames;
                        routeTime[0] = wasdn.estimatedTime[0];
                        routeTime[1] = wasdn.estimatedTime[1];
                        miles = wasdn.miles;
                        //file = wasdn;
                    }
                    if (pressedCities.includes("dc") && pressedCities.includes("az")){
                        multipointLine.coordinates.push(wasAz);
                        cityNames = wasaz.cityNames;
                        routeTime[0] = wasaz.estimatedTime[0];
                        routeTime[1] = wasaz.estimatedTime[1];
                        miles = wasaz.miles;
                        //file = wasaz;
                    }
                    if (pressedCities.includes("dc") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(wasLa);
                        cityNames = wasla.cityNames;
                        routeTime[0] = wasla.estimatedTime[0];
                        routeTime[1] = wasla.estimatedTime[1];
                        miles = wasla.miles;
                        //file = wasla;
                    }
                    if (pressedCities.includes("boston") && pressedCities.includes("denver")){
                        multipointLine.coordinates.push(bostonNewYork);
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasDn);
                        cityNames = ["Boston", "Denver"];
                        routeTime[0] = bosny.estimatedTime[0] + nydc.estimatedTime[0] + wasdn.estimatedTime[0];
                        routeTime[1] = bosny.estimatedTime[1] + nydc.estimatedTime[1] + wasdn.estimatedTime[1];
                        miles = bosny.miles + nydc.miles + wasdn.miles;
                    }
                    if (pressedCities.includes("boston") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(bostonNewYork);
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasLa);
                        cityNames = ["Boston", "Los Angeles"];
                        routeTime[0] = bosny.estimatedTime[0] + nydc.estimatedTime[0] + wasla.estimatedTime[0];
                        routeTime[1] = bosny.estimatedTime[1] + nydc.estimatedTime[1] + wasla.estimatedTime[1];
                        miles = bosny.miles + nydc.miles + wasla.miles;
                    }
                    if (pressedCities.includes("boston") && pressedCities.includes("az")){
                        multipointLine.coordinates.push(bostonNewYork);
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasAz);
                        cityNames = ["Boston", "Phoenix"];
                        routeTime[0] = bosny.estimatedTime[0] + nydc.estimatedTime[0] + wasaz.estimatedTime[0];
                        routeTime[1] = bosny.estimatedTime[1] + nydc.estimatedTime[1] + wasaz.estimatedTime[1];
                        miles = bosny.miles + nydc.miles + wasaz.miles;
                    }
                    if (pressedCities.includes("boston") && pressedCities.includes("dallas")){
                        multipointLine.coordinates.push(bostonNewYork);
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasDa);
                        cityNames = ["Boston", "Dallas"];
                        routeTime[0] = bosny.estimatedTime[0] + nydc.estimatedTime[0] + wasda.estimatedTime[0];
                        routeTime[1] = bosny.estimatedTime[1] + nydc.estimatedTime[1] + wasda.estimatedTime[1];
                        miles = bosny.miles + nydc.miles + wasda.miles;
                    }
                    if (pressedCities.includes("newyork") && pressedCities.includes("dallas")){
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasDa);
                        cityNames = ["New York", "Dallas"];
                        routeTime[0] = nydc.estimatedTime[0] + wasda.estimatedTime[0];
                        routeTime[1] = nydc.estimatedTime[1] + wasda.estimatedTime[1];
                        miles = nydc.miles + wasda.miles;
                    }
                    if (pressedCities.includes("newyork") && pressedCities.includes("az")){
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasAz);
                        cityNames = ["New York", "Phoenix"];
                        routeTime[0] = nydc.estimatedTime[0] + wasaz.estimatedTime[0];
                        routeTime[1] = nydc.estimatedTime[1] + wasaz.estimatedTime[1];
                        miles = nydc.miles + wasaz.miles;
                    }
                    if (pressedCities.includes("newyork") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(wasLa);
                        multipointLine.coordinates.push(newDc);
                        cityNames = ["New York", "Los Angeles"];
                        routeTime[0] = nydc.estimatedTime[0] + wasla.estimatedTime[0];
                        routeTime[1] = nydc.estimatedTime[1] + wasla.estimatedTime[1];
                        miles = nydc.miles + wasla.miles;
                    }
                    if (pressedCities.includes("newyork") && pressedCities.includes("denver")){
                        multipointLine.coordinates.push(newDc);
                        multipointLine.coordinates.push(wasDn);
                        cityNames = ["New York", "Denver"];
                        routeTime[0] = nydc.estimatedTime[0] + wasdn.estimatedTime[0];
                        routeTime[1] = nydc.estimatedTime[1] + wasdn.estimatedTime[1];
                        miles = nydc.miles + wasdn.miles;
                    }
                    if (pressedCities.includes("atlanta") && pressedCities.includes("az")){
                        multipointLine.coordinates.push(atDal);
                        multipointLine.coordinates.push(dalAz);
                        cityNames = ["Atlanta", "Phoenix"];
                        routeTime[0] = atdal.estimatedTime[0] + dalaz.estimatedTime[0];
                        routeTime[1] = atdal.estimatedTime[1] + dalaz.estimatedTime[1];
                        miles = atdal.miles + dalaz.miles;
                    }
                    if (pressedCities.includes("atlanta") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(atDal);
                        multipointLine.coordinates.push(dalAz);
                        multipointLine.coordinates.push(laAz);
                        cityNames = ["Atlanta", "Los Angeles"];
                        routeTime[0] = laaz.estimatedTime[0] + atdal.estimatedTime[0] + dalaz.estimatedTime[0];
                        routeTime[1] = laaz.estimatedTime[1] + atdal.estimatedTime[1] + dalaz.estimatedTime[1];
                        miles = atdal.miles + dalaz.miles + laaz.miles;
                    }
                    if (pressedCities.includes("atlanta") && pressedCities.includes("denver")){
                        multipointLine.coordinates.push(atDal);
                        multipointLine.coordinates.push(dalDn);
                        cityNames = ["Atlanta", "Denver"];
                        routeTime[0] = atdal.estimatedTime[0] + daldn.estimatedTime[0];
                        routeTime[1] = atdal.estimatedTime[1] + daldn.estimatedTime[1];
                        miles = atdal.miles + daldn.miles;
                    }
                    if (pressedCities.includes("dallas") && pressedCities.includes("az")){
                        multipointLine.coordinates.push(dalAz);
                        cityNames = dalaz.cityNames;
                        routeTime[0] = dalaz.estimatedTime[0];
                        routeTime[1] = dalaz.estimatedTime[1];
                        miles = dalaz.miles;
                        //file = dalaz;
                    }
                    if (pressedCities.includes("houston") && pressedCities.includes("az")){
                        multipointLine.coordinates.push(houAz);
                        cityNames = houaz.cityNames;
                        routeTime[0] = houaz.estimatedTime[0];
                        routeTime[1] = houaz.estimatedTime[1];
                        miles = houaz.miles;
                        //file = houaz;
                    }
                    if (pressedCities.includes("dallas") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(dalAz);
                        multipointLine.coordinates.push(laAz);
                        cityNames = ["Dallas", "Los Angeles"];
                        routeTime[0] = laaz.estimatedTime[0] + dalaz.estimatedTime[0];
                        routeTime[1] = laaz.estimatedTime[1] + dalaz.estimatedTime[1];
                        miles = dalaz.miles + laaz.miles;
                    }
                    if (pressedCities.includes("houston") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(houAz);
                        multipointLine.coordinates.push(laAz);
                        cityNames = ["Houston", "Los Angeles"];
                        routeTime[0] = laaz.estimatedTime[0] + houaz.estimatedTime[0];
                        routeTime[1] = laaz.estimatedTime[1] + houaz.estimatedTime[1];
                        miles = houaz.miles + laaz.miles;
                    }
                    if (pressedCities.includes("denver") && pressedCities.includes("az")){
                        multipointLine.coordinates.push(denAz);
                        cityNames = denaz.cityNames;
                        routeTime[0] = denaz.estimatedTime[0];
                        routeTime[1] = denaz.estimatedTime[1];
                        miles = denaz.miles;
                        //file = denaz;
                    }
                    if (pressedCities.includes("denver") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(denLa);
                        cityNames = denla.cityNames;
                        routeTime[0] = denla.estimatedTime[0];
                        routeTime[1] = denla.estimatedTime[1];
                        miles = denla.miles;
                        //file = denla;
                    }
                    if (pressedCities.includes("chicago") && pressedCities.includes("az")){
                        multipointLine.coordinates.push(chiAz);
                        cityNames = chiaz.cityNames;
                        routeTime[0] = chiaz.estimatedTime[0];
                        routeTime[1] = chiaz.estimatedTime[1];
                        miles = chiaz.miles;
                        //file = chiaz;
                    }
                    if (pressedCities.includes("chicago") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(chiDn);
                        multipointLine.coordinates.push(denLa);
                        cityNames = ["Chicago", "Los Angeles"];
                        routeTime[0] = chidn.estimatedTime[0] + denla.estimatedTime[0];
                        routeTime[1] = chidn.estimatedTime[1] + denla.estimatedTime[1];
                        miles = denla.miles + chidn.miles; 
                    }
                    if (pressedCities.includes("min") && pressedCities.includes("la")){
                        multipointLine.coordinates.push(minDn);
                        multipointLine.coordinates.push(denLa);
                        cityNames = ["Minneapolis", "Los Angeles"];
                        routeTime[0] = mindn.estimatedTime[0] + denla.estimatedTime[0];
                        routeTime[1] = mindn.estimatedTime[1] + denla.estimatedTime[1];
                        miles = denla.miles + mindn.miles; 
                    }
                    if (pressedCities.includes("min") && pressedCities.includes("az")){
                        multipointLine.coordinates.push(minDn);
                        multipointLine.coordinates.push(denAz);
                        cityNames = ["Minneapolis", "Phoenix"];
                        routeTime[0] = mindn.estimatedTime[0] + denaz.estimatedTime[0];
                        routeTime[1] = mindn.estimatedTime[1] + denaz.estimatedTime[1];
                        miles = denaz.miles + mindn.miles; 
                    }

                    console.log(multipointLine.coordinates); 
                    projection(multipointLine); //send the multipointline to the projection function so that we can convert all lat-long coordinates to xy coordinates

                    bool = true; //if we got here, this means that two cities were selected, and if another city is selected after this, we should reset everything
                
                }*/

                function makeLine(response){
                    console.log(response);
                    var coordinates = []

                    var array = [response[0].start_location.lng , response[0].start_location.lat];
                    coordinates.push(array);
                    for (var i = 0; i < response.length; i++){
                        var arr = [response[i].end_location.lng, response[i].end_location.lat];
                        coordinates.push(arr);
                    }
                    console.log(coordinates);
                    multipointLine.coordinates.push(coordinates);
                    projection(multipointLine);

                }

                function projection(line){
                    //create a scale and tanslation for the map
                    var albersProjection = d3.geo.albersUsa()
                    .scale(1325)
                    .translate([930/2, 490/2]);

                    //allows for easy pasting of routes to the svg container
                    var geoPath = d3.geo.path().projection(albersProjection);


                    //add all routes to the svg container
                    var lineStringPath1 = svg.append("path").attr("d", geoPath(line)).style("stroke", "red").style("fill", "none").on("mouseover", lineSelected);
                }
                /**TODO - Add additional information at our discretion */

                var cinfo = [];
                function getCityInfo(value){
                    //switch statement to find which city was selected
                    switch (value){
                        case 894.5904541015625:
                            cinfo[0] = "Boston Children's Museum, Adams National Historical Park";
                            cinfo[1] = "Boston Marriott Copley Place, MidTown Hotel";
                            cinfo[2] = "Fire + Ice Restaurants, Rocco's Cucina & Bar";
                            break;
                        case 618.6180419921875:
                            cinfo[0] = "The Art Institute of Chicago, The Field Museum";
                            cinfo[1] = "The Guesthouse Hotel, The Langham";
                            cinfo[2] = "Alinea, Avec";
                            break;
                        case 460.3203125:
                            cinfo[0] = "Dallas Arboretum & Botanical Gardens, Morton H. Meyerson Symphony Center";
                            cinfo[1] = "Grand Hyatt DFW, Hotel ZaZa Dallas";
                            cinfo[2] = "Jimmy's Food Store, Kenny's Wood Fired Grill";
                            break;
                        case 854.57080078125:
                            cinfo[0] = "Central Park, The Metropolitan Museum of Art";
                            cinfo[1] = "Casablanca Hotel Times Square, Crosby Street Hotel";
                            cinfo[2] = "Daniel, Per Se";
                            break;
                        case 56.60659408569336:
                            cinfo[0] = "Universal Studios Hollywood General Admission Ticket, The Getty Center";
                            cinfo[1] = "Hotel Bel-Air, Magic Castle Hotel";
                            cinfo[2] = "Providence, Brent's Delicatessen & Restaurant";
                            break;
                        case 488.36859130859375:
                            cinfo[0] = "The Houston Museum of Natural Science, Houston Zoo";
                            cinfo[1] = "The Lancaster, Hotel Granduca Houston";
                            cinfo[2] = "Chama Gaucha Brazilian Steakhouse, Peli Peli Galleria";
                            break;
                        case 520.3973388671875:
                            cinfo[0] = "Target Field, Guthrie Theater";
                            cinfo[1] = "Kimpton Grand Hotel Minneapolis, Hampton Inn & Suites Minneapolis/Downtown";
                            cinfo[2] = "Capital Grille, 112 Eatery";
                            break;
                        case 317.56353759765625:
                            cinfo[0] = "Denver Botanic Gardens, Coors Field";
                            cinfo[1] = "The Crawford Hotel, Four Seasons Hotel Denver";
                            cinfo[2] = "Root Down, Racca's Pizzeria Napoletana";
                            break;
                        case 811.4656982421875:
                            cinfo[0] = "Lincoln Memorial, Smithsonian National Air and Space Museum";
                            cinfo[1] = "The Avery Georgetown, Four Seasons Hotel Washington, DC";
                            cinfo[2] = "Ambar Capitol Hill, The Capital Grille";
                            break;
                        case 696.8407592773438:
                            cinfo[0] = "Georgia Aquarium, Fox Theatre";
                            cinfo[1] = "Loews Atlanta Hotel, The St. Regis Atlanta";
                            cinfo[2] = "Bone's Restaurant, Capital Grille";
                            break;
                        case 169.16160583496094:
                            cinfo[0] = "Desert Botanical Garden, Heard Museum";
                            cinfo[1] = "Royal Palms Resort and Spa, Drury Inn & Suites Phoenix Happy Valley";
                            cinfo[2] = "Little Miss Bbq, Rusconi's American Kitchen";
                            break;
                        case 838.7890625:
                            cinfo[0] = "Independence Hall, Philadelphia Museum of Art";
                            cinfo[1] = "The Rittenhouse Hotel, Kimpton Hotel Monaco Philadelphia";
                            cinfo[2] = "Ristorante Pesto, Zahav";
                            break;
                        default:
                            console.log("problem"); //if we got here, something is seriously wrong
                        }
                }

                function lineSelected(d){
                    var c = d3.select(this);
                    console.log("the line was selected");

                    //put the information about the route into a div below the map

                    var v = objects[0].cx.animVal.value;
                    getCityInfo(v);

                    var div = document.getElementById("displayInfo");
                    div.innerHTML = "<h1 style=\"align=center\">Route Information</h1><ul><li>Start Location: " + cityNames[0] + "</li><li>End Location: " + cityNames[1] + "</li><li>Estimated Driving Time: " + estimatedTime + "</li><li>Distance: " + miles  + "</ul>";
                    div.innerHTML += "<br>" + "<h2 style=\"align=center\">First City: " + cityNames[0] + "</h2>" + "<ul><li>Things to do: " + cinfo[0] + "</li>" + "<li>Hotels: "+ cinfo[1] + "</li>" + "<li>Popular Restaurants: "+ cinfo[2] + "</li></ul>";

                    var v = objects[1].cx.animVal.value;
                    getCityInfo(v);

                    div.innerHTML += "<br>" + "<h2 style=\"align=center\">Second City: " + cityNames[1] + "</h2>" + "<ul><li>Things to do: " + cinfo[0] + "</li>" + "<li>Hotels: "+ cinfo[1] + "</li>" + "<li>Popular Restaurants: "+ cinfo[2] + "</li></ul>";;
                    div.hidden = false;      
                }
        </script>
</html>
